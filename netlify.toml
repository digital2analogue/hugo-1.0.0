[build]
  publish = "public"
  # Build theme assets first (if theme uses npm), then run Hugo to generate site
  command = "npm --prefix themes/blowfish ci && npm --prefix themes/blowfish run build && hugo --gc --minify"

[context.production.environment]
  # install this Hugo version in Netlify build environment
  HUGO_VERSION = "0.154.2"
  HUGO_ENV = "production"
  HUGO_ENABLEGITINFO = "true"
  HUGO_EXTENDED = "true"
  # Optional: pin Node version for theme tooling
  NODE_VERSION = "18"

[context.deploy-preview.environment]
  HUGO_VERSION = "0.154.2"
  HUGO_ENV = "development"
  HUGO_ENABLEGITINFO = "true"
  HUGO_EXTENDED = "true"
  NODE_VERSION = "18"
